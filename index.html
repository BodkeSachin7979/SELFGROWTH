<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21-Day Gurukul Discipline</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Mono&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-dark: #0a0a0a;
        --bg-card: #111111;
        --text-primary: #f0f0f0;
        --text-secondary: #888888;
        --accent: #d97706;
        --accent-light: #f59e0b;
        --border: #333333;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --phase-morning: #3b82f6;
        --phase-afternoon: #10b981;
        --phase-evening: #8b5cf6;
        --phase-night: #6366f1;
      }

      body {
        background-color: var(--bg-dark);
        color: var(--text-primary);
        font-family: "Inter", sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        line-height: 1.6;
      }

      .font-mono-timing {
        font-family: "Space Mono", monospace;
      }

      .checkmark {
        width: 28px;
        height: 28px;
        border: 2px solid var(--border);
        border-radius: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .checkmark:hover {
        border-color: var(--accent);
        transform: scale(1.05);
      }

      .checkmark.checked {
        background-color: var(--success);
        border-color: var(--success);
      }

      .affirmation-card {
        background: linear-gradient(
          145deg,
          rgba(30, 30, 30, 0.9),
          rgba(40, 40, 40, 0.9)
        );
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid rgba(255, 255, 255, 0.1);
        position: relative;
        overflow: hidden;
        transition: all 0.3s ease;
      }

      .affirmation-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      }

      .affirmation-card.completed {
        background: linear-gradient(
          145deg,
          rgba(16, 185, 129, 0.1),
          rgba(30, 30, 30, 0.9)
        );
        border-color: var(--success);
      }

      .affirmation-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(
          90deg,
          transparent,
          currentColor,
          transparent
        );
        opacity: 0.5;
      }

      .affirmation-card.morning {
        border-left: 4px solid var(--phase-morning);
        color: var(--phase-morning);
      }
      .affirmation-card.afternoon {
        border-left: 4px solid var(--phase-afternoon);
        color: var(--phase-afternoon);
      }
      .affirmation-card.evening {
        border-left: 4px solid var(--phase-evening);
        color: var(--phase-evening);
      }
      .affirmation-card.night {
        border-left: 4px solid var(--phase-night);
        color: var(--phase-night);
      }

      .ritual-tag {
        display: inline-block;
        background-color: rgba(255, 255, 255, 0.1);
        color: var(--text-primary);
        padding: 0.25rem 0.75rem;
        border-radius: 20px;
        font-size: 0.75rem;
        margin-top: 0.75rem;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .affirmation-text {
        font-size: 1.125rem;
        line-height: 1.8;
        margin-bottom: 1rem;
        position: relative;
        padding-left: 1.5rem;
      }

      .affirmation-text::before {
        content: '"';
        position: absolute;
        left: 0;
        top: -0.5rem;
        font-size: 2rem;
        color: currentColor;
        opacity: 0.5;
        font-family: serif;
      }

      .progress-bar {
        height: 8px;
        background-color: var(--border);
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, var(--accent), var(--accent-light));
        border-radius: 4px;
        transition: width 0.5s ease;
      }

      .day-card {
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
        background-color: var(--bg-card);
        border: 2px solid var(--border);
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
      }

      .day-card:hover {
        transform: translateY(-2px);
      }

      .day-card.completed {
        background-color: var(--success);
        border-color: var(--success);
        color: white;
      }

      .day-card.current {
        border-color: var(--accent);
        background-color: var(--accent);
        color: white;
        box-shadow: 0 0 20px rgba(217, 119, 6, 0.4);
      }

      .stat-card {
        background-color: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .stat-value {
        font-size: 2.5rem;
        font-weight: 800;
        line-height: 1;
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .phase-header {
        background: linear-gradient(
          135deg,
          rgba(30, 30, 30, 0.9),
          rgba(40, 40, 40, 0.9)
        );
        border-left: 4px solid;
        padding: 1.5rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        backdrop-filter: blur(10px);
      }

      .activity-item {
        background-color: rgba(30, 30, 30, 0.5);
        border: 1px solid var(--border);
        border-radius: 10px;
        padding: 1.25rem;
        margin-bottom: 1rem;
        transition: all 0.3s ease;
      }

      .activity-item:hover {
        border-color: var(--accent);
        transform: translateX(5px);
      }

      .activity-item.completed {
        background-color: rgba(16, 185, 129, 0.08);
        border-color: var(--success);
      }

      .notification {
        position: fixed;
        top: 24px;
        right: 24px;
        z-index: 1000;
        padding: 1rem 1.5rem;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
        animation: slideIn 0.3s ease forwards;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--accent), var(--accent-light));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: none;
        cursor: pointer;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(217, 119, 6, 0.3);
      }

      .btn-secondary {
        background-color: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        border: 1px solid var(--border);
        cursor: pointer;
      }

      .btn-secondary:hover {
        background-color: rgba(255, 255, 255, 0.1);
        transform: translateY(-2px);
      }

      .glow {
        animation: glow 2s infinite alternate;
      }

      @keyframes glow {
        from {
          box-shadow: 0 0 5px var(--accent);
        }
        to {
          box-shadow: 0 0 20px var(--accent);
        }
      }

      .fade-in {
        animation: fadeIn 0.5s ease forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .badge {
        padding: 0.25rem 0.75rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
      }

      .badge-success {
        background-color: rgba(16, 185, 129, 0.2);
        color: var(--success);
      }

      .badge-warning {
        background-color: rgba(245, 158, 11, 0.2);
        color: var(--warning);
      }

      .badge-info {
        background-color: rgba(59, 130, 246, 0.2);
        color: #3b82f6;
      }

      .tab-button {
        padding: 0.75rem 1.5rem;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        border-radius: 8px 8px 0 0;
        position: relative;
      }

      .tab-button.active {
        color: var(--accent);
        background-color: var(--bg-card);
      }

      .tab-button.active::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--accent), var(--accent-light));
        border-radius: 3px 3px 0 0;
      }

      .tab-content {
        display: none;
        animation: fadeIn 0.3s ease;
      }

      .tab-content.active {
        display: block;
      }

      ::-webkit-scrollbar {
        width: 10px;
      }

      ::-webkit-scrollbar-track {
        background: var(--bg-card);
      }

      ::-webkit-scrollbar-thumb {
        background: var(--border);
        border-radius: 5px;
      }

      ::-webkit-scrollbar-thumb:hover {
        background: var(--accent);
      }

      .quote-icon {
        font-size: 1.5rem;
        opacity: 0.7;
        margin-right: 0.5rem;
      }
    </style>
  </head>
  <body class="min-h-screen">
    <!-- Header -->
    <header
      class="sticky top-0 z-50 bg-black/95 backdrop-blur-md border-b border-gray-800/50 shadow-xl"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
        <div class="flex flex-col md:flex-row md:items-center justify-between">
          <div class="mb-4 md:mb-0">
            <h1 class="text-2xl md:text-3xl font-bold tracking-tight">
              <span
                class="bg-gradient-to-r from-amber-500 to-orange-600 bg-clip-text text-transparent"
              >
                21-Day Discipline
              </span>
            </h1>
            <p class="text-gray-400 mt-1 text-sm">
              Daily structure with phase-specific affirmations for mastery
            </p>
          </div>

          <div class="flex items-center space-x-4">
            <div class="text-right hidden md:block">
              <p class="text-sm text-gray-400">Current Day</p>
              <p
                class="text-2xl font-bold text-amber-500"
                id="currentDayDisplay"
              >
                Day 1
              </p>
            </div>
            <div class="h-10 w-px bg-gray-800 hidden md:block"></div>
            <div class="text-right">
              <p class="text-sm text-gray-400">Today's Progress</p>
              <p class="text-2xl font-bold" id="todayProgress">0%</p>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <!-- Dashboard Section -->
      <section class="mb-8 fade-in">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Left Panel - Stats -->
          <div class="lg:col-span-2 space-y-6">
            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="stat-card">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-lg font-semibold">Affirmations</h3>
                  <i class="fas fa-comment-dots text-blue-500 text-xl"></i>
                </div>
                <p class="stat-value" id="affirmationsCompleted">0</p>
                <p class="text-gray-400 text-sm mt-1">Completed today</p>
                <div class="progress-bar mt-2">
                  <div
                    class="progress-fill"
                    id="affirmationsProgress"
                    style="width: 0%"
                  ></div>
                </div>
              </div>

              <div class="stat-card">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-lg font-semibold">Current Streak</h3>
                  <i class="fas fa-fire text-amber-500 text-xl"></i>
                </div>
                <p class="stat-value" id="currentStreak">0</p>
                <p class="text-gray-400 text-sm mt-1">Consecutive days</p>
              </div>

              <div class="stat-card">
                <div class="flex items-center justify-between mb-3">
                  <h3 class="text-lg font-semibold">Consistency</h3>
                  <i class="fas fa-chart-line text-green-500 text-xl"></i>
                </div>
                <p class="stat-value" id="consistencyRate">0%</p>
                <p class="text-gray-400 text-sm mt-1">Daily adherence</p>
              </div>
            </div>

            <!-- 21-Day Progress -->
            <div class="stat-card">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-semibold">21-Day Challenge Progress</h3>
                <div class="flex items-center space-x-2">
                  <span class="text-sm text-gray-400">Overall:</span>
                  <span
                    class="text-lg font-bold text-amber-500"
                    id="overallProgress"
                    >0%</span
                  >
                </div>
              </div>

              <div
                class="grid grid-cols-7 sm:grid-cols-10 lg:grid-cols-14 gap-2 mb-3"
              >
                <!-- Day cards will be populated here -->
              </div>

              <div class="progress-bar">
                <div
                  class="progress-fill"
                  id="overallProgressBar"
                  style="width: 0%"
                ></div>
              </div>
              <div class="flex justify-between text-sm text-gray-400 mt-2">
                <span>Day 1</span>
                <span>Day 21</span>
              </div>
            </div>
          </div>

          <!-- Right Panel - Day Controls -->
          <div class="space-y-6">
            <div class="stat-card">
              <div class="flex items-center justify-between mb-4">
                <h2
                  class="text-2xl font-bold text-amber-500"
                  id="selectedDayTitle"
                >
                  Day 1
                </h2>
                <span id="dayStatusBadge" class="badge badge-info"
                  >Not Started</span
                >
              </div>

              <div class="space-y-5">
                <div>
                  <div class="flex justify-between text-sm mb-2">
                    <span class="text-gray-400">Daily Progress</span>
                    <span
                      id="dayProgressPercent"
                      class="font-bold text-amber-500"
                      >0%</span
                    >
                  </div>
                  <div class="progress-bar">
                    <div
                      id="dayProgressBar"
                      class="progress-fill"
                      style="width: 0%"
                    ></div>
                  </div>
                  <p class="text-xs text-gray-500 mt-1" id="activitiesCount">
                    0 activities completed
                  </p>
                </div>

                <div class="space-y-2">
                  <button
                    onclick="markDayComplete()"
                    class="btn-primary w-full py-3"
                  >
                    <i class="fas fa-check-circle mr-2"></i>
                    Complete Today
                  </button>

                  <button
                    onclick="resetCurrentDay()"
                    class="btn-secondary w-full py-3"
                  >
                    <i class="fas fa-redo mr-2"></i>
                    Reset Day
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Tabs Navigation -->
      <section class="mb-6 fade-in" style="animation-delay: 0.1s">
        <div class="flex space-x-2 border-b border-gray-800">
          <button class="tab-button active" onclick="switchTab('affirmations')">
            <i class="fas fa-comment-dots mr-2"></i>Affirmations
          </button>
          <button class="tab-button" onclick="switchTab('routine')">
            <i class="fas fa-tasks mr-2"></i>Daily Routine
          </button>
          <button class="tab-button" onclick="switchTab('reflection')">
            <i class="fas fa-book mr-2"></i>Reflection
          </button>
        </div>
      </section>

      <!-- Affirmations Tab -->
      <section
        id="affirmations-tab"
        class="tab-content active fade-in"
        style="animation-delay: 0.2s"
      >
        <div class="mb-6">
          <h2 class="text-2xl font-bold mb-4">Daily Affirmations by Phase</h2>
          <p class="text-gray-400 mb-6">
            Complete each affirmation with its ritual to activate phase energy
          </p>

          <!-- Morning Affirmation -->
          <div class="affirmation-card morning" id="morning-affirmation">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <div
                    class="w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center mr-4"
                  >
                    <i class="fas fa-sun text-blue-500"></i>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-blue-400">
                      üåÖ Morning (04:30‚Äì06:30)
                    </h3>
                    <p class="text-gray-400 text-sm">
                      Saraswati / Knowledge Focus
                    </p>
                  </div>
                </div>

                <div class="space-y-3 mb-4">
                  <div class="affirmation-text">
                    "I gain clear knowledge today."
                  </div>
                  <div class="affirmation-text">
                    "My mind learns fast and well."
                  </div>
                  <div class="affirmation-text">
                    "I act wisely with full focus."
                  </div>
                </div>

                <div class="ritual-tag">
                  <i class="fas fa-hands-praying mr-1"></i>
                  Ritual: Sit upright, breathe 3 times, repeat slowly, pause
                  after each line.
                </div>
              </div>

              <div
                class="checkmark ml-4"
                onclick="toggleAffirmation('morning')"
              >
                <!-- Checkmark will be added by JS -->
              </div>
            </div>
          </div>

          <!-- Afternoon Affirmation -->
          <div class="affirmation-card afternoon" id="afternoon-affirmation">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <div
                    class="w-10 h-10 rounded-lg bg-green-500/20 flex items-center justify-center mr-4"
                  >
                    <i class="fas fa-sun text-green-500"></i>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-green-400">
                      ‚òÄÔ∏è Afternoon (09:00‚Äì17:00)
                    </h3>
                    <p class="text-gray-400 text-sm">Lakshmi / Wealth Focus</p>
                  </div>
                </div>

                <div class="space-y-3 mb-4">
                  <div class="affirmation-text">
                    "I attract wealth through my work."
                  </div>
                  <div class="affirmation-text">
                    "My efforts grow money and resources."
                  </div>
                  <div class="affirmation-text">
                    "I create abundance with steady action."
                  </div>
                </div>

                <div class="ritual-tag">
                  <i class="fas fa-brain mr-1"></i>
                  Ritual: Sit quietly 1 min, repeat mentally, focus on one
                  action after reciting.
                </div>
              </div>

              <div
                class="checkmark ml-4"
                onclick="toggleAffirmation('afternoon')"
              >
                <!-- Checkmark will be added by JS -->
              </div>
            </div>
          </div>

          <!-- Evening Affirmation -->
          <div class="affirmation-card evening" id="evening-affirmation">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <div
                    class="w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center mr-4"
                  >
                    <i class="fas fa-moon text-purple-500"></i>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-purple-400">
                      üåô Evening (17:00‚Äì18:30)
                    </h3>
                    <p class="text-gray-400 text-sm">
                      Brahma/Vishnu/Mahesh / Power Focus
                    </p>
                  </div>
                </div>

                <div class="space-y-3 mb-4">
                  <div class="affirmation-text">
                    "I stay strong and calm today."
                  </div>
                  <div class="affirmation-text">
                    "I act with power and control."
                  </div>
                  <div class="affirmation-text">
                    "My presence influences with wisdom."
                  </div>
                </div>

                <div class="ritual-tag">
                  <i class="fas fa-walking mr-1"></i>
                  Ritual: Repeat during walking/prayer, breathe 3 times before
                  each line, observe posture.
                </div>
              </div>

              <div
                class="checkmark ml-4"
                onclick="toggleAffirmation('evening')"
              >
                <!-- Checkmark will be added by JS -->
              </div>
            </div>
          </div>

          <!-- Night Affirmation -->
          <div class="affirmation-card night" id="night-affirmation">
            <div class="flex items-start justify-between">
              <div class="flex-1">
                <div class="flex items-center mb-3">
                  <div
                    class="w-10 h-10 rounded-lg bg-indigo-500/20 flex items-center justify-center mr-4"
                  >
                    <i class="fas fa-bed text-indigo-500"></i>
                  </div>
                  <div>
                    <h3 class="text-xl font-semibold text-indigo-400">
                      üåë Bedtime (21:00)
                    </h3>
                    <p class="text-gray-400 text-sm">Combined Focus</p>
                  </div>
                </div>

                <div class="space-y-3 mb-4">
                  <div class="affirmation-text">
                    "I rest with knowledge, wealth, power."
                  </div>
                  <div class="affirmation-text">
                    "Clarity, abundance, and strength grow nightly."
                  </div>
                  <div class="affirmation-text">
                    "Tomorrow I act wisely and strong."
                  </div>
                </div>

                <div class="ritual-tag">
                  <i class="fas fa-moon mr-1"></i>
                  Ritual: Say silently, pause after each line, sleep
                  immediately.
                </div>
              </div>

              <div class="checkmark ml-4" onclick="toggleAffirmation('night')">
                <!-- Checkmark will be added by JS -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Routine Tab -->
      <section id="routine-tab" class="tab-content fade-in">
        <div class="mb-8">
          <div class="flex items-center justify-between mb-6">
            <h2 class="text-2xl font-bold">Daily Discipline Tracker</h2>
            <div class="flex space-x-2">
              <button onclick="expandAll()" class="btn-secondary text-sm">
                <i class="fas fa-expand mr-2"></i>Expand All
              </button>
              <button onclick="collapseAll()" class="btn-secondary text-sm">
                <i class="fas fa-compress mr-2"></i>Collapse All
              </button>
            </div>
          </div>

          <!-- Timeline -->
          <div id="routineContainer" class="space-y-6">
            <!-- Routine will be populated here -->
          </div>
        </div>
      </section>

      <!-- Reflection Tab -->
      <section id="reflection-tab" class="tab-content fade-in">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <div class="lg:col-span-2">
            <div class="stat-card">
              <h3 class="text-xl font-semibold mb-4">
                Daily Reflection & Notes
              </h3>
              <textarea
                id="dayNotes"
                placeholder="Write your reflections here...\n‚Ä¢ What did I execute today?\n‚Ä¢ Where did I resist?\n‚Ä¢ One correction for tomorrow\n‚Ä¢ Insights from today's affirmations"
                class="w-full h-64 bg-gray-900/50 border border-gray-700 rounded-lg p-4 text-gray-300 focus:outline-none focus:border-amber-500 resize-none text-sm"
                oninput="saveNotes()"
              ></textarea>
              <div class="flex justify-between items-center mt-4">
                <div class="flex space-x-2">
                  <button onclick="clearNotes()" class="btn-secondary text-sm">
                    Clear Notes
                  </button>
                  <button onclick="addTemplate()" class="btn-secondary text-sm">
                    Use Template
                  </button>
                </div>
                <span id="saveStatus" class="text-xs text-green-500 hidden">
                  <i class="fas fa-check mr-1"></i>Auto-saved
                </span>
              </div>
            </div>
          </div>

          <div>
            <div class="stat-card mb-6">
              <h3 class="text-lg font-semibold mb-4">
                Today's Affirmation Summary
              </h3>
              <div class="space-y-4">
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Morning</span>
                  <span id="morningStatus" class="text-red-500 text-sm">
                    <i class="fas fa-times mr-1"></i>Pending
                  </span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Afternoon</span>
                  <span id="afternoonStatus" class="text-red-500 text-sm">
                    <i class="fas fa-times mr-1"></i>Pending
                  </span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Evening</span>
                  <span id="eveningStatus" class="text-red-500 text-sm">
                    <i class="fas fa-times mr-1"></i>Pending
                  </span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-400">Night</span>
                  <span id="nightStatus" class="text-red-500 text-sm">
                    <i class="fas fa-times mr-1"></i>Pending
                  </span>
                </div>
                <div class="pt-3 border-t border-gray-800">
                  <div class="flex items-center justify-between">
                    <span class="font-medium">Completion</span>
                    <span
                      id="affirmationsSummary"
                      class="text-amber-500 font-bold"
                      >0/4</span
                    >
                  </div>
                </div>
              </div>
            </div>

            <div class="phase-header border-l-amber-500">
              <h3 class="text-xl font-semibold mb-4 text-amber-500">
                Affirmation Guidelines
              </h3>
              <ul class="space-y-2 text-sm text-gray-300">
                <li class="flex items-start">
                  <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                  <span>Complete each affirmation in its time phase</span>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                  <span>Follow the ritual precisely</span>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                  <span>Visualize the outcome as you recite</span>
                </li>
                <li class="flex items-start">
                  <i class="fas fa-check text-green-500 mr-2 mt-1"></i>
                  <span>Maintain the emotion associated with each phase</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Gurukul Laws -->
      <section class="mt-12 fade-in" style="animation-delay: 0.4s">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
          <div class="phase-header border-l-amber-500">
            <h3 class="text-xl font-semibold mb-4 text-amber-500">
              GURUKUL LAWS (ABSOLUTE)
            </h3>
            <ol class="space-y-3">
              <li class="flex items-start">
                <span class="font-bold text-amber-500 mr-3">1.</span>
                <span>Same routine daily</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-amber-500 mr-3">2.</span>
                <span>No rescheduling</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-amber-500 mr-3">3.</span>
                <span>Missed block = consequence</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-amber-500 mr-3">4.</span>
                <span>Silence strengthens discipline</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-amber-500 mr-3">5.</span>
                <span>Boredom = success</span>
              </li>
            </ol>
          </div>

          <div class="phase-header border-l-blue-500">
            <h3 class="text-xl font-semibold mb-4 text-blue-500">
              AFFIRMATION PRINCIPLES
            </h3>
            <ol class="space-y-3">
              <li class="flex items-start">
                <span class="font-bold text-blue-500 mr-3">1.</span>
                <span>Morning: Clarity of mind and knowledge focus</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-blue-500 mr-3">2.</span>
                <span>Afternoon: Action-oriented wealth creation</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-blue-500 mr-3">3.</span>
                <span>Evening: Power and influence development</span>
              </li>
              <li class="flex items-start">
                <span class="font-bold text-blue-500 mr-3">4.</span>
                <span>Night: Integration and subconscious programming</span>
              </li>
            </ol>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-800/50 py-8 mt-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <div class="mb-4 md:mb-0">
            <p class="text-gray-400">Gurukul Discipline with Affirmations</p>
            <p class="text-sm text-gray-500 mt-1">
              Phase-specific affirmations for holistic development
            </p>
          </div>

          <div class="flex space-x-4">
            <button
              onclick="exportData()"
              class="text-gray-400 hover:text-amber-500 transition flex items-center"
            >
              <i class="fas fa-download mr-2"></i>Export Data
            </button>
            <button
              onclick="resetAll()"
              class="text-gray-400 hover:text-red-500 transition flex items-center"
            >
              <i class="fas fa-trash-alt mr-2"></i>Reset All
            </button>
          </div>
        </div>
      </div>
    </footer>

    <!-- Application JavaScript -->
    <script>
      // Initialize Data
      let challengeData = {
        currentDay: 1,
        days: {},
        stats: {
          totalAffirmations: 4,
          completedAffirmations: 0,
          currentStreak: 0,
          completedDays: 0,
        },
      };

      // Activity Structure (for routine tab)
      const activities = [
        // Brahma Muhurta Phase
        {
          id: "wake",
          time: "04:30 ‚Äì 04:40",
          title: "Wake + Mauna (Silence)",
          phase: "brahma",
          description:
            "Wake instantly, no phone, no speech, sit upright, observe breath",
        },
        {
          id: "prayer",
          time: "04:40 ‚Äì 05:00",
          title: "Prayer / Mantra / Sankalpa",
          phase: "brahma",
          description: "Same mantra daily, no music, same spot",
        },
        {
          id: "hydration",
          time: "05:00 ‚Äì 05:20",
          title: "Hydration + Cleansing",
          phase: "brahma",
          description: "Drink water, oral hygiene, elimination",
        },
        {
          id: "prana",
          time: "05:20 ‚Äì 05:45",
          title: "PrƒÅ·πáa + Movement",
          phase: "brahma",
          description:
            "Surya Namaskar / yoga / walk, slow controlled breathing",
        },
        {
          id: "coldwater",
          time: "05:45 ‚Äì 06:05",
          title: "Cold Water Cleansing",
          phase: "brahma",
          description: "Face or full bath, no hot water",
        },
        {
          id: "quiet",
          time: "06:05 ‚Äì 06:30",
          title: "Quiet Sitting",
          phase: "brahma",
          description: "No planning, no thinking, just awareness",
        },

        // Saraswati Phase
        {
          id: "deepwork",
          time: "06:30 ‚Äì 08:30",
          title: "Deep Work Block",
          phase: "saraswati",
          description:
            "Technical study, active recall only, no tutorials without output",
        },
        {
          id: "breakfast",
          time: "08:30 ‚Äì 09:00",
          title: "Simple Breakfast + Walk",
          phase: "saraswati",
          description: "Same food daily, no screens, 10 min walk",
        },

        // Karma Yoga Phase
        {
          id: "technical",
          time: "09:00 ‚Äì 12:00",
          title: "Technical Skills Block",
          phase: "karma",
          description: "90 min learning, 10 min stand, 80 min application",
        },
        {
          id: "lunch",
          time: "12:00 ‚Äì 01:00",
          title: "Lunch + Walk",
          phase: "karma",
          description: "Eat till 80%, no phone, walk silently",
        },
        {
          id: "project",
          time: "01:00 ‚Äì 03:00",
          title: "Project Development",
          phase: "karma",
          description: "Build, break, fix - no new theory",
        },
        {
          id: "communication",
          time: "03:00 ‚Äì 05:00",
          title: "Communication Practice",
          phase: "karma",
          description: "Speak aloud, record once, review once",
        },

        // Sandhya Phase
        {
          id: "peace",
          time: "05:00 ‚Äì 06:30",
          title: "Free Peace Hour",
          phase: "sandhya",
          description: "Walk alone, sit quietly, no productivity",
        },

        // Ratri Phase
        {
          id: "dinner",
          time: "06:30 ‚Äì 07:15",
          title: "Light Dinner",
          phase: "ratri",
          description: "Simple food, no overeating",
        },
        {
          id: "reflection",
          time: "07:15 ‚Äì 07:45",
          title: "Written Reflection",
          phase: "ratri",
          description:
            "What did I execute? Where did I resist? One correction tomorrow",
        },
        {
          id: "reading",
          time: "07:45 ‚Äì 08:30",
          title: "Quiet Reading / Mantra",
          phase: "ratri",
          description: "Non-dopamine content, slow pace",
        },
        {
          id: "shutdown",
          time: "08:30 ‚Äì 09:00",
          title: "Shutdown Ritual",
          phase: "ratri",
          description: "Phone OFF, lights dim, silence, sleep by 9 PM",
        },
      ];

      // Affirmations data
      const affirmations = [
        {
          id: "morning",
          title: "Morning Affirmation",
          time: "04:30‚Äì06:30",
          focus: "Saraswati / Knowledge",
          statements: [
            "I gain clear knowledge today.",
            "My mind learns fast and well.",
            "I act wisely with full focus.",
          ],
          ritual:
            "Sit upright, breathe 3 times, repeat slowly, pause after each line.",
          color: "#3B82F6",
          icon: "fa-sun",
        },
        {
          id: "afternoon",
          title: "Afternoon Affirmation",
          time: "09:00‚Äì17:00",
          focus: "Lakshmi / Wealth",
          statements: [
            "I attract wealth through my work.",
            "My efforts grow money and resources.",
            "I create abundance with steady action.",
          ],
          ritual:
            "Sit quietly 1 min, repeat mentally, focus on one action after reciting.",
          color: "#10B981",
          icon: "fa-sun",
        },
        {
          id: "evening",
          title: "Evening Affirmation",
          time: "17:00‚Äì18:30",
          focus: "Brahma/Vishnu/Mahesh / Power",
          statements: [
            "I stay strong and calm today.",
            "I act with power and control.",
            "My presence influences with wisdom.",
          ],
          ritual:
            "Repeat during walking/prayer, breathe 3 times before each line, observe posture.",
          color: "#8B5CF6",
          icon: "fa-moon",
        },
        {
          id: "night",
          title: "Night Affirmation",
          time: "21:00",
          focus: "Combined Focus",
          statements: [
            "I rest with knowledge, wealth, power.",
            "Clarity, abundance, and strength grow nightly.",
            "Tomorrow I act wisely and strong.",
          ],
          ritual: "Say silently, pause after each line, sleep immediately.",
          color: "#6366F1",
          icon: "fa-bed",
        },
      ];

      // Initialize Application
      function init() {
        loadData();
        renderDayCards();
        updateDisplay();
        updateAffirmationDisplay();
        renderRoutine();
      }

      // Load data from localStorage
      function loadData() {
        const saved = localStorage.getItem("gurukulAffirmations");
        if (saved) {
          challengeData = JSON.parse(saved);
        } else {
          // Initialize default data
          for (let day = 1; day <= 21; day++) {
            challengeData.days[day] = {
              completed: false,
              affirmations: {
                morning: false,
                afternoon: false,
                evening: false,
                night: false,
              },
              activities: {},
              notes: "",
            };

            activities.forEach((activity) => {
              challengeData.days[day].activities[activity.id] = {
                completed: false,
                timestamp: null,
              };
            });
          }
          saveData();
        }

        updateStats();
      }

      // Save data to localStorage
      function saveData() {
        localStorage.setItem(
          "gurukulAffirmations",
          JSON.stringify(challengeData)
        );
      }

      // Update statistics
      function updateStats() {
        let completedDays = 0;
        let currentStreak = 0;
        let totalAffirmationsCompleted = 0;

        // Calculate stats
        for (let day = 1; day <= 21; day++) {
          const dayData = challengeData.days[day];
          const affirmationsCompleted = Object.values(
            dayData.affirmations
          ).filter((a) => a).length;
          totalAffirmationsCompleted += affirmationsCompleted;

          if (dayData.completed) {
            completedDays++;
            // Check for streaks
            if (day <= challengeData.currentDay) {
              currentStreak++;
            } else {
              // Reset streak if gap found
              currentStreak = 0;
            }
          } else if (day < challengeData.currentDay) {
            // Reset streak if day not completed
            currentStreak = 0;
          }
        }

        challengeData.stats = {
          totalAffirmations: 4,
          completedAffirmations: totalAffirmationsCompleted,
          currentStreak: currentStreak,
          longestStreak: Math.max(
            challengeData.stats.longestStreak || 0,
            currentStreak
          ),
          completedDays: completedDays,
        };
      }

      // Render day cards
      function renderDayCards() {
        const container = document.querySelector(".grid-cols-7");
        container.innerHTML = "";

        for (let day = 1; day <= 21; day++) {
          const dayData = challengeData.days[day];
          const isCurrent = day === challengeData.currentDay;
          const isCompleted = dayData.completed;
          const affirmationsCompleted = Object.values(
            dayData.affirmations
          ).filter((a) => a).length;
          const progress = Math.round((affirmationsCompleted / 4) * 100);

          const card = document.createElement("div");
          card.className = `day-card ${
            isCompleted
              ? "completed"
              : isCurrent
              ? "current"
              : progress > 0
              ? "in-progress"
              : ""
          }`;
          card.innerHTML = `
                    ${day}
                    ${
                      progress > 0 && !isCompleted
                        ? `
                        <div class="absolute -bottom-1 left-1 right-1 h-1 bg-amber-500/30 rounded-full overflow-hidden">
                            <div class="h-full bg-amber-500" style="width: ${progress}%"></div>
                        </div>
                    `
                        : ""
                    }
                `;

          card.onclick = () => {
            challengeData.currentDay = day;
            updateDisplay();
            updateAffirmationDisplay();
            renderRoutine();
          };

          container.appendChild(card);
        }
      }

      // Update display
      function updateDisplay() {
        const day = challengeData.currentDay;
        const dayData = challengeData.days[day];
        const affirmationsCompleted = Object.values(
          dayData.affirmations
        ).filter((a) => a).length;
        const progress = Math.round((affirmationsCompleted / 4) * 100);

        // Update UI elements
        document.getElementById("currentDayDisplay").textContent = `Day ${day}`;
        document.getElementById("selectedDayTitle").textContent = `Day ${day}`;
        document.getElementById("todayProgress").textContent = `${progress}%`;
        document.getElementById(
          "dayProgressPercent"
        ).textContent = `${progress}%`;
        document.getElementById("dayProgressBar").style.width = `${progress}%`;
        document.getElementById(
          "activitiesCount"
        ).textContent = `${affirmationsCompleted}/4 affirmations completed`;

        // Update status badge
        const badge = document.getElementById("dayStatusBadge");
        badge.className = "badge ";
        if (dayData.completed) {
          badge.classList.add("badge-success");
          badge.textContent = "Completed";
        } else if (progress > 0) {
          badge.classList.add("badge-warning");
          badge.textContent = `${progress}% Complete`;
        } else {
          badge.classList.add("badge-info");
          badge.textContent = "Not Started";
        }

        // Update notes
        document.getElementById("dayNotes").value = dayData.notes || "";

        // Update stats
        updateStats();

        // Update statistics display
        document.getElementById("affirmationsCompleted").textContent =
          challengeData.stats.completedAffirmations;
        document.getElementById("currentStreak").textContent =
          challengeData.stats.currentStreak;
        document.getElementById("consistencyRate").textContent = `${Math.round(
          (challengeData.stats.completedDays / day) * 100
        )}%`;

        // Update progress bars
        const affirmationsProgress = Math.round(
          (affirmationsCompleted / 4) * 100
        );
        document.getElementById(
          "affirmationsProgress"
        ).style.width = `${affirmationsProgress}%`;

        const overallProgress = Math.round(
          (challengeData.stats.completedDays / 21) * 100
        );
        document.getElementById(
          "overallProgress"
        ).textContent = `${overallProgress}%`;
        document.getElementById(
          "overallProgressBar"
        ).style.width = `${overallProgress}%`;

        // Re-render day cards to update current day highlight
        renderDayCards();

        saveData();
      }

      // Update affirmation display
      function updateAffirmationDisplay() {
        const day = challengeData.currentDay;
        const dayData = challengeData.days[day];

        // Update each affirmation card
        affirmations.forEach((affirmation) => {
          const isCompleted = dayData.affirmations[affirmation.id];
          const card = document.getElementById(`${affirmation.id}-affirmation`);
          const checkmark = card.querySelector(".checkmark");

          if (isCompleted) {
            card.classList.add("completed");
            checkmark.classList.add("checked");
            checkmark.innerHTML =
              '<i class="fas fa-check text-white text-sm"></i>';
          } else {
            card.classList.remove("completed");
            checkmark.classList.remove("checked");
            checkmark.innerHTML = "";
          }
        });

        // Update status indicators
        document.getElementById("morningStatus").innerHTML = dayData
          .affirmations.morning
          ? '<i class="fas fa-check text-green-500 mr-1"></i>Completed'
          : '<i class="fas fa-times text-red-500 mr-1"></i>Pending';

        document.getElementById("afternoonStatus").innerHTML = dayData
          .affirmations.afternoon
          ? '<i class="fas fa-check text-green-500 mr-1"></i>Completed'
          : '<i class="fas fa-times text-red-500 mr-1"></i>Pending';

        document.getElementById("eveningStatus").innerHTML = dayData
          .affirmations.evening
          ? '<i class="fas fa-check text-green-500 mr-1"></i>Completed'
          : '<i class="fas fa-times text-red-500 mr-1"></i>Pending';

        document.getElementById("nightStatus").innerHTML = dayData.affirmations
          .night
          ? '<i class="fas fa-check text-green-500 mr-1"></i>Completed'
          : '<i class="fas fa-times text-red-500 mr-1"></i>Pending';

        const affirmationsCompleted = Object.values(
          dayData.affirmations
        ).filter((a) => a).length;
        document.getElementById(
          "affirmationsSummary"
        ).textContent = `${affirmationsCompleted}/4`;
      }

      // Toggle affirmation completion
      function toggleAffirmation(affirmationId) {
        const day = challengeData.currentDay;
        const dayData = challengeData.days[day];

        dayData.affirmations[affirmationId] =
          !dayData.affirmations[affirmationId];

        // Check if all affirmations are completed
        const allCompleted = Object.values(dayData.affirmations).every(
          (a) => a
        );
        if (allCompleted && !dayData.completed) {
          dayData.completed = true;
          showNotification(
            "üéâ All affirmations completed for today!",
            "success"
          );

          // Auto-advance to next day if not last day
          if (day < 21) {
            setTimeout(() => {
              challengeData.currentDay = day + 1;
              updateDisplay();
              updateAffirmationDisplay();
              renderRoutine();
            }, 1500);
          }
        } else if (!allCompleted && dayData.completed) {
          dayData.completed = false;
        }

        updateDisplay();
        updateAffirmationDisplay();
        showNotification(
          `Affirmation ${
            dayData.affirmations[affirmationId] ? "completed" : "unchecked"
          }`,
          "info"
        );
      }

      // Mark day as complete
      function markDayComplete() {
        const day = challengeData.currentDay;
        const dayData = challengeData.days[day];

        // Mark all affirmations as complete
        affirmations.forEach((affirmation) => {
          dayData.affirmations[affirmation.id] = true;
        });

        dayData.completed = true;

        updateDisplay();
        updateAffirmationDisplay();
        showNotification("‚úÖ All affirmations marked as complete!", "success");

        // Auto-advance
        if (day < 21) {
          setTimeout(() => {
            challengeData.currentDay = day + 1;
            updateDisplay();
            updateAffirmationDisplay();
            renderRoutine();
          }, 2000);
        }
      }

      // Reset current day
      function resetCurrentDay() {
        if (confirm("Reset all affirmations and progress for today?")) {
          const day = challengeData.currentDay;
          const dayData = challengeData.days[day];

          // Reset all affirmations
          affirmations.forEach((affirmation) => {
            dayData.affirmations[affirmation.id] = false;
          });

          // Reset activities
          activities.forEach((activity) => {
            if (dayData.activities[activity.id]) {
              dayData.activities[activity.id].completed = false;
              dayData.activities[activity.id].timestamp = null;
            }
          });

          dayData.completed = false;
          dayData.notes = "";

          updateDisplay();
          updateAffirmationDisplay();
          renderRoutine();
          showNotification("Day reset successfully", "warning");
        }
      }

      // Save notes
      function saveNotes() {
        const day = challengeData.currentDay;
        challengeData.days[day].notes =
          document.getElementById("dayNotes").value;
        saveData();

        const status = document.getElementById("saveStatus");
        status.classList.remove("hidden");
        setTimeout(() => status.classList.add("hidden"), 2000);
      }

      // Clear notes
      function clearNotes() {
        if (confirm("Clear all notes for today?")) {
          document.getElementById("dayNotes").value = "";
          saveNotes();
        }
      }

      // Add template to notes
      function addTemplate() {
        const template = `‚Ä¢ What did I execute today?\n‚Ä¢ Where did I resist?\n‚Ä¢ One correction for tomorrow\n‚Ä¢ Insights from today's affirmations\n‚Ä¢ How did each affirmation impact my day?\n‚Ä¢ What energy did I bring to each phase?`;
        document.getElementById("dayNotes").value = template;
        saveNotes();
      }

      // Switch tabs
      function switchTab(tabName) {
        // Update tab buttons
        document.querySelectorAll(".tab-button").forEach((button) => {
          button.classList.remove("active");
        });
        event.target.classList.add("active");

        // Update tab content
        document.querySelectorAll(".tab-content").forEach((content) => {
          content.classList.remove("active");
        });
        document.getElementById(`${tabName}-tab`).classList.add("active");
      }

      // Expand all
      function expandAll() {
        showNotification("All sections expanded", "info");
      }

      // Collapse all
      function collapseAll() {
        showNotification("All sections collapsed", "info");
      }

      // Render routine (for routine tab)
      function renderRoutine() {
        const container = document.getElementById("routineContainer");
        if (!container) return;

        container.innerHTML = "";

        // Group activities by phase
        const phases = [
          {
            id: "brahma",
            title: "BRAHMA MUHURTA ‚Äî INNER COMMAND PHASE",
            color: "#D97706",
            icon: "fa-sun",
          },
          {
            id: "saraswati",
            title: "SARASWATI PHASE ‚Äî PEAK LEARNING",
            color: "#10B981",
            icon: "fa-book",
          },
          {
            id: "karma",
            title: "KARMA YOGA ‚Äî EXECUTION PHASE",
            color: "#3B82F6",
            icon: "fa-cogs",
          },
          {
            id: "sandhya",
            title: "SANDHYA ‚Äî TRANSITION & PEACE",
            color: "#8B5CF6",
            icon: "fa-moon",
          },
          {
            id: "ratri",
            title: "RATRI CHARYA ‚Äî CLOSURE PHASE",
            color: "#6366F1",
            icon: "fa-bed",
          },
        ];

        phases.forEach((phase) => {
          const phaseActivities = activities.filter(
            (a) => a.phase === phase.id
          );
          const dayData = challengeData.days[challengeData.currentDay];
          const completedInPhase = phaseActivities.filter(
            (a) => dayData.activities[a.id]?.completed
          ).length;
          const phaseProgress = Math.round(
            (completedInPhase / phaseActivities.length) * 100
          );

          // Phase header
          const phaseHTML = `
                    <div class="phase-header" style="border-left-color: ${phase.color}">
                        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-4">
                            <div class="flex items-center mb-4 sm:mb-0">
                                <div class="w-10 h-10 rounded-lg flex items-center justify-center mr-4" style="background-color: ${phase.color}20">
                                    <i class="fas ${phase.icon}" style="color: ${phase.color}"></i>
                                </div>
                                <div>
                                    <h3 class="text-xl font-semibold" style="color: ${phase.color}">${phase.title}</h3>
                                    <p class="text-gray-400 text-sm">${phaseActivities.length} activities</p>
                                </div>
                            </div>
                            <div class="flex items-center">
                                <div class="mr-4 text-right">
                                    <p class="text-sm text-gray-400">Progress</p>
                                    <p class="text-lg font-bold" style="color: ${phase.color}">${phaseProgress}%</p>
                                </div>
                                <div class="w-32">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${phaseProgress}%; background: ${phase.color}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                `;

          container.innerHTML += phaseHTML;

          // Activities
          phaseActivities.forEach((activity) => {
            const activityData = dayData.activities[activity.id];
            const isCompleted = activityData?.completed || false;

            const activityHTML = `
                        <div class="activity-item ${
                          isCompleted ? "completed" : ""
                        }" id="activity-${activity.id}">
                            <div class="flex items-start">
                                <div class="checkmark ${
                                  isCompleted ? "checked" : ""
                                }" onclick="toggleActivity('${activity.id}')">
                                    ${
                                      isCompleted
                                        ? '<i class="fas fa-check text-white text-sm"></i>'
                                        : ""
                                    }
                                </div>
                                <div class="ml-4 flex-1">
                                    <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-2">
                                        <h4 class="font-semibold text-lg">${
                                          activity.title
                                        }</h4>
                                        <span class="font-mono-timing text-amber-400 bg-gray-800 px-2 py-1 rounded text-sm mt-1 sm:mt-0">
                                            ${activity.time}
                                        </span>
                                    </div>
                                    <p class="text-gray-300">${
                                      activity.description
                                    }</p>
                                </div>
                            </div>
                        </div>
                    `;

            container.innerHTML += activityHTML;
          });

          container.innerHTML += `</div></div>`;
        });
      }

      // Toggle activity completion (for routine tab)
      function toggleActivity(activityId) {
        const day = challengeData.currentDay;
        const dayData = challengeData.days[day];

        if (!dayData.activities[activityId]) {
          dayData.activities[activityId] = {
            completed: false,
            timestamp: null,
          };
        }

        dayData.activities[activityId].completed =
          !dayData.activities[activityId].completed;
        dayData.activities[activityId].timestamp = dayData.activities[
          activityId
        ].completed
          ? new Date().toISOString()
          : null;

        saveData();
        renderRoutine();
        showNotification(
          `Activity ${
            dayData.activities[activityId].completed ? "completed" : "unchecked"
          }`,
          "info"
        );
      }

      // Export data
      function exportData() {
        const dataStr = JSON.stringify(challengeData, null, 2);
        const dataUri =
          "data:application/json;charset=utf-8," + encodeURIComponent(dataStr);

        const link = document.createElement("a");
        link.setAttribute("href", dataUri);
        link.setAttribute(
          "download",
          `gurukul-affirmations-${new Date().toISOString().split("T")[0]}.json`
        );
        link.click();

        showNotification("Data exported successfully", "success");
      }

      // Reset all data
      function resetAll() {
        if (confirm("Reset ALL progress? This cannot be undone.")) {
          localStorage.removeItem("gurukulAffirmations");
          challengeData = {
            currentDay: 1,
            days: {},
            stats: {
              totalAffirmations: 4,
              completedAffirmations: 0,
              currentStreak: 0,
              completedDays: 0,
            },
          };
          init();
          showNotification("All data reset", "warning");
        }
      }

      // Show notification
      function showNotification(message, type = "info") {
        const notification = document.createElement("div");
        notification.className = "notification";

        let bgColor = "bg-gray-800";
        let borderColor = "border-gray-600";

        if (type === "success") {
          bgColor = "bg-green-900/20";
          borderColor = "border-green-500";
        } else if (type === "warning") {
          bgColor = "bg-amber-900/20";
          borderColor = "border-amber-500";
        } else if (type === "danger") {
          bgColor = "bg-red-900/20";
          borderColor = "border-red-500";
        }

        notification.className = `notification ${bgColor} border-l-4 ${borderColor}`;
        notification.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${
                      type === "success"
                        ? "fa-check-circle"
                        : type === "warning"
                        ? "fa-exclamation-triangle"
                        : type === "danger"
                        ? "fa-times-circle"
                        : "fa-info-circle"
                    } mr-3 text-lg"></i>
                    <span>${message}</span>
                </div>
            `;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.animation = "slideIn 0.3s ease reverse forwards";
          setTimeout(() => notification.remove(), 300);
        }, 3000);
      }

      // Initialize on load
      document.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
